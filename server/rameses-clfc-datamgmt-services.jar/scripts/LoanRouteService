import com.rameses.annotations.*;
import com.rameses.common.*;
import com.rameses.services.extended.*;
import java.rmi.server.UID;

class LoanRouteService extends ActiveCrudListService 
{	
	@ActiveDB(value='loan_route')
	def em;

	@ProxyMethod
	public def getColumns( params ) {
		return [
			[name:'code', caption:'Code', maxWidth:150, width:150],
			[name:'description', caption:'Description', maxWidth:200, width:200],
			[name:'area', caption:'Area']
		]

	}

	@ProxyMethod
	public def getCollectors( params ) {
		if (!params.code) throw new Exception('Please specify code');

		return em.getCollectors([parentid: params.code]); 
	}

	@ProxyMethod 
	public void addCollector(params) {
		def data = [
			objid: 		'RCOLL' + new UID(), 
			parentid: 	params.parentid, 
			user: 		[objid: params.objid, name: params.name] 
		];
		em.create(data, 'route_collector'); 
	}

	@ProxyMethod 
	public void removeCollector(params) {
		if (!params.objid) throw new Exception('Please specify objid'); 

		em.removeCollector(params); 
	} 
}
