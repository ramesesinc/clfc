import com.rameses.common.*;
import com.rameses.annotations.*;

class MobileLocationService
{
	@Service("MobileTrackerService")
	def trackerSvc;

	@Service("DateService")
	def dateSvc;

	@ProxyMethod
	public def postLocation( params ) {
		def response = "fail";
		if (params.trackerid) {
			println 'params -> '+params;
			def map = [
				trackerid	: params.trackerid,
				txntype		: 'NORMAL',
				refid		: params.objid,
				reftype		: 'TRACK',
				lng 		: params.longitude,
				lat 		: params.latitude,
				state		: params.state
			];
			trackerSvc.log(map);
			response = "success";
		}
		return [response: response];
	}
}