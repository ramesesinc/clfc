import com.rameses.common.*;
import com.rameses.annotations.*;

class MobileLocationService
{
	@Service("MobileTrackerService")
	def trackerSvc;

	@Service("DateService")
	def dateSvc;

	@ProxyMethod
	public void postLocation( params ) {
		if (params.trackerid) {
			def map = [
				trackerid	: params.trackerid,
				txntype		: 'NORMAL',
				refid		: 'TRCK'+new java.rmi.server.UID(),
				reftype		: 'TRACK',
				lng 		: params.longitude,
				lat 		: params.latitude
			];
			trackerSvc.log(map);
		}
	}
}