import com.rameses.common.*;
import com.rameses.annotations.*;
import java.rmi.server.UID;

class DeviceLocationService {
	@Service("MobileTrackerService")
	def trackerSvc;

	@ProxyMethod
	public def postLocation( params ) {
		def map = [
			refid: 'TRCK'+new UID(),
			reftype: 'TRACK',
			lng: params.longitude,
			lat: params.latitude
		];
		params.sessions.each{
			map.sessionid = it;
			trackerSvc.log(map);
		}
	}
}