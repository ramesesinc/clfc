import com.rameses.common.*;
import com.rameses.annotations.*;
import java.rmi.server.UID;

class DeviceLocationService {
	@Service("MobileTrackerService")
	def trackerSvc;

	@Service("DateService")
	def dateSvc;

	@ProxyMethod
	public def postLocation( params ) {
		if (params.trackerid) {
			def map = [
				trackerid: params.trackerid,
				txntype: 'NORMAL',
				refid: 'TRCK'+new UID(),
				reftype: 'TRACK',
				lng: params.longitude,
				lat: params.latitude
			];
			trackerSvc.log(map);
		}
	}
}